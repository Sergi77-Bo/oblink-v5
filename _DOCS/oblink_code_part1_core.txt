--- PART 1: CORE THEME FILES ---
--- FILE: theme/functions.php ---
<?php
// Function file for OBLINK Theme - V60 RESTORE (Pre-Messaging) - STABLE

// Auto-installation des fichiers SEO à l'activation du thème
require_once get_template_directory() . '/inc/theme-activation.php';

/**
 * Determine current user view mode (RBAC)
 * Roles: 'visitor', 'student', 'freelance', 'recruiter'
 */
function oblink_get_user_role()
{
    if (!is_user_logged_in()) {
        return 'visitor';
    }

    $user = wp_get_current_user();

    // Admin is Recruiter for demo purposes, or explicit 'recruiter' role
    if (current_user_can('manage_options') || in_array('recruiter', (array) $user->roles)) {
        return 'recruiter';
    }

    // Check for explicit "Expert" mode in user meta
    $role_mode = get_user_meta($user->ID, 'role_mode', true);
    if ($role_mode === 'expert') {
        return 'freelance';
    }

    // Default for logged in users
    return 'student';
}

function oblink_scripts()
{
    // 1. Charger Tailwind CSS (CDN)
    wp_enqueue_script('tailwindcss', 'https://cdn.tailwindcss.com', array(), '3.4.0', false);

    // 2. Config Tailwind (Injected inline)
    $tailwind_config = "
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'oblink-orange': '#FF6600',
                        'oblink-blue': '#0099FF', 
                        'oblink-violet': '#9A48D0',
                        'oblink-gray': '#303030',
                    },
                    fontFamily: {
                        'display': ['Overpass', 'sans-serif'], 
                        'body': ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    ";
    wp_add_inline_script('tailwindcss', $tailwind_config);

    // 3. Styles
    wp_enqueue_style('fontawesome', 'https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css');
    wp_enqueue_style('google-fonts', 'https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Overpass:wght@400;600;700;800;900&display=swap');
    wp_enqueue_style('oblink-style', get_stylesheet_uri());

    // 4. Custom App JS
    wp_enqueue_script('oblink-app', get_template_directory_uri() . '/js/app.js', array(), '1.1', true);
}
add_action('wp_enqueue_scripts', 'oblink_scripts');

// -- SUPABASE INTEGRATION --
function oblink_enqueue_supabase()
{
    // 1. Supabase SDK (CDN)
    wp_enqueue_script('supabase-js', 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js', [], '2.0.0', false);

    // 2. Init Script
    wp_enqueue_script('oblink-supabase-init', get_template_directory_uri() . '/js/supabase-config.js', ['supabase-js'], '1.0', true);

    // 3. Inject Credentials
    wp_localize_script('oblink-supabase-init', 'oblink_vars', [
        'ajax_url' => admin_url('admin-ajax.php'),
        'nonce' => wp_create_nonce('oblink_nonce'),
        'supabase_url' => 'https://kqpjohxtzyprqvhijjet.supabase.co',
        'supabase_key' => 'sb_publishable_bkZHMMqGz23jmskNgqx7BA_aKHQdCQU',
        'home_url' => home_url()
    ]);
}
add_action('wp_enqueue_scripts', 'oblink_enqueue_supabase');

// -- EMBED SUPPORT (YouTube, etc.) --
add_theme_support('automatic-feed-links');
add_theme_support('title-tag');
add_theme_support('post-thumbnails');

// Enable oEmbed for YouTube and other providers
add_filter('oembed_discovery_links', '__return_true');

// Wrap embeds in responsive container
function oblink_embed_html($html, $url)
{
    if (strpos($url, 'youtube.com') !== false || strpos($url, 'youtu.be') !== false) {
        return '<div class="video-container" style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;margin:2rem 0;"><div style="position:absolute;top:0;left:0;width:100%;height:100%;">' . $html . '</div></div>';
    }
    return '<div class="embed-container" style="margin:2rem 0;">' . $html . '</div>';
}
add_filter('embed_oembed_html', 'oblink_embed_html', 10, 2);


// -- Email System (Gardé pour l'instant) --
require_once get_template_directory() . '/inc/emails.php'; // On pourra le migrer sur Supabase Edge Functions plus tard

// -- Messaging System --
require_once get_template_directory() . '/inc/messaging.php';

// -- Simulator Email --
require_once get_template_directory() . '/inc/simulator-email.php';

add_action('wp_ajax_save_simulator_lead', 'handle_simulator_lead');
add_action('wp_ajax_nopriv_save_simulator_lead', 'handle_simulator_lead');

// AJAX Handler for Contact Form
add_action('wp_ajax_send_contact_form', 'handle_contact_form');
add_action('wp_ajax_nopriv_send_contact_form', 'handle_contact_form');

function handle_contact_form()
{
    // Validate nonce (optional but recommended)
    // if (!isset($_POST['nonce']) || !wp_verify_nonce($_POST['nonce'], 'oblink_nonce')) {
    //     wp_send_json_error(['message' => 'Invalid nonce']);
    //     return;
    // }

    // Sanitize inputs
    $name = sanitize_text_field($_POST['name'] ?? '');
    $email = sanitize_email($_POST['email'] ?? '');
    $subject = sanitize_text_field($_POST['subject'] ?? '');
    $message = sanitize_textarea_field($_POST['message'] ?? '');

    // Validate required fields
    if (empty($name) || empty($email) || empty($subject) || empty($message)) {
        wp_send_json_error(['message' => 'Tous les champs sont requis']);
        return;
    }

    // Validate email format
    if (!is_email($email)) {
        wp_send_json_error(['message' => 'Email invalide']);
        return;
    }

    // Prepare email
    $to = 'contact@oblink.fr';
    $email_subject = '[OBLINK Contact] ' . $subject;

    // Build email body
    $email_body = "Nouveau message de contact OBLINK\n\n";
    $email_body .= "Nom: $name\n";
    $email_body .= "Email: $email\n";
    $email_body .= "Sujet: $subject\n\n";
    $email_body .= "Message:\n$message\n\n";
    $email_body .= "---\n";
    $email_body .= "Envoyé depuis: " . home_url('/contact') . "\n";
    $email_body .= "Date: " . current_time('d/m/Y H:i');

    // Email headers
    $headers = [
        'Content-Type: text/plain; charset=UTF-8',
        'From: OBLINK Contact <noreply@oblink.fr>',
        'Reply-To: ' . $name . ' <' . $email . '>',
    ];

    // Send email
    $email_sent = wp_mail($to, $email_subject, $email_body, $headers);

    if ($email_sent) {
        // Optional: Save to database or Supabase for tracking
        // error_log("Contact form submitted by: $name ($email)");

        wp_send_json_success([
            'message' => 'Message envoyé avec succès'
        ]);
    } else {
        error_log("Contact form email failed for: $email");
        wp_send_json_error([
            'message' => 'Erreur lors de l\'envoi. Veuillez réessayer ou nous contacter directement à contact@oblink.fr'
        ]);
    }
}


function handle_simulator_lead()
{
    $email = sanitize_email($_POST['email']);
    $mode = sanitize_text_field($_POST['mode']);
    $data = json_decode(stripslashes($_POST['data']), true);
    $results = json_decode(stripslashes($_POST['results']), true);

    if (!is_email($email)) {
        wp_send_json_error(['message' => 'Invalid email']);
        return;
    }

    // TODO: Sauvegarder dans Supabase
    // Pour l'instant, on log juste
    error_log("Simulator Lead: $email | Mode: $mode");

    // Envoyer l'email
    $params = $data;
    $params['mode'] = $mode;

    $email_sent = send_simulator_email($email, $results, $mode, $params);

    if ($email_sent) {
        wp_send_json_success(['message' => 'Email sent successfully']);
    } else {
        wp_send_json_error(['message' => 'Failed to send email']);
    }
}

// -- DEPRECATED WP DB SYSTEMS (Removed for Supabase) --
// User Registration via WP DB -> REMOVED
// Admin Columns -> REMOVED

// -- REDIRECTIONS: DEFERRED (Also causes issues) --
?>--- FILE: theme/index.php ---
<?php
/**
 * Template Name: Blog
 */

include 'header-inc.php';
?>

<div class="container mx-auto px-4 py-8 pt-32 min-h-screen">
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold mb-4 font-display text-oblink-gray">Le Blog <span
                class="text-oblink-orange">OBLINK</span></h1>
        <p class="text-lg text-gray-500">Conseils, guides pratiques et actualités pour les opticiens indépendants et les
            entreprises d'optique</p>
    </div>

    <!-- FILTRES PAR CATÉGORIE -->
    <div class="flex flex-wrap justify-center gap-3 mb-12">
        <button class="category-filter active px-6 py-2.5 rounded-full font-bold transition-all duration-300"
            data-category="all">
            Tous
        </button>
        <?php
        $categories = get_categories(array(
            'orderby' => 'name',
            'order' => 'ASC',
            'hide_empty' => true,
        ));

        foreach ($categories as $category):
            if ($category->slug !== 'non-classe'):
                ?>
                <button class="category-filter px-6 py-2.5 rounded-full font-bold transition-all duration-300"
                    data-category="<?php echo esc_attr($category->slug); ?>">
                    <?php echo esc_html($category->name); ?>
                </button>
                <?php
            endif;
        endforeach;
        ?>
    </div>

    <style>
        .category-filter {
            background: white;
            color: #6b7280;
            border: 2px solid #e5e7eb;
        }

        .category-filter:hover {
            border-color: #FF6600;
            color: #FF6600;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 102, 0, 0.2);
        }

        .category-filter.active {
            background: #FF6600;
            color: white;
            border-color: #FF6600;
            box-shadow: 0 4px 12px rgba(255, 102, 0, 0.3);
        }

        .article-card {
            transition: opacity 0.3s, transform 0.3s;
        }

        .article-card.hidden {
            display: none;
        }
    </style>

    <?php if (have_posts()): ?>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="articles-grid">
            <?php
            // Custom query to pagination work correctly on a static page used as blog
            $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
            $args = array(
                'post_type' => 'post',
                'posts_per_page' => 9,
                'paged' => $paged
            );
            $the_query = new WP_Query($args);

            if ($the_query->have_posts()):
                while ($the_query->have_posts()):
                    $the_query->the_post();

                    // Get post categories
                    $post_categories = get_the_category();
                    $category_slugs = array();
                    if ($post_categories) {
                        foreach ($post_categories as $cat) {
                            $category_slugs[] = $cat->slug;
                        }
                    }
                    $categories_data = implode(' ', $category_slugs);
                    ?>
                    <article id="post-<?php the_ID(); ?>"
                        class="article-card <?php echo implode(' ', array_map(function ($slug) {
                            return 'cat-' . $slug;
                        }, $category_slugs)); ?> bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden border border-gray-100 flex flex-col h-full"
                        data-categories="<?php echo esc_attr($categories_data); ?>">
                        <?php if (has_post_thumbnail()): ?>
                            <a href="<?php the_permalink(); ?>" class="block overflow-hidden relative h-56">
                                <?php the_post_thumbnail('medium_large', ['class' => 'w-full h-full object-cover transform hover:scale-105 transition-transform duration-500']); ?>
                            </a>
                        <?php else: ?>
                            <a href="<?php the_permalink(); ?>"
                                class="block overflow-hidden relative h-56 bg-gray-100 flex items-center justify-center">
                                <i class="fas fa-image text-gray-300 text-4xl"></i>
                            </a>
                        <?php endif; ?>

                        <div class="p-6 flex-1 flex flex-col">
                            <div class="mb-3 flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-oblink-orange">
                                <?php
                                $categories = get_the_category();
                                if (!empty($categories)) {
                                    echo esc_html($categories[0]->name);
                                } else {
                                    echo 'Article';
                                }
                                ?>
                            </div>

                            <h2 class="text-xl font-bold mb-3 font-display leading-tight">
                                <a href="<?php the_permalink(); ?>"
                                    class="text-oblink-gray hover:text-oblink-blue transition-colors">
                                    <?php the_title(); ?>
                                </a>
                            </h2>

                            <div class="text-gray-600 mb-4 text-sm flex-1 line-clamp-3">
                                <?php the_excerpt(); ?>
                            </div>

                            <div class="mt-auto flex items-center justify-between pt-4 border-t border-gray-100">
                                <div class="text-xs text-gray-400">
                                    <i class="far fa-calendar-alt mr-1"></i> <?php echo get_the_date(); ?>
                                </div>
                                <a href="<?php the_permalink(); ?>"
                                    class="text-sm font-bold text-oblink-blue hover:text-oblink-violet transition-colors flex items-center gap-1">
                                    Lire <i class="fas fa-arrow-right text-xs"></i>
                                </a>
                            </div>
                        </div>
                    </article>
                    <?php
                endwhile;

                // Pagination
                echo '<div class="mt-12 col-span-full">';
                echo '<style>
                    .pagination {
                        display: flex;
                        justify-content: center;
                        gap: 8px;
                        align-items: center;
                    }
                    .pagination a,
                    .pagination span {
                        display: inline-block;
                        padding: 10px 16px;
                        background: white;
                        border: 2px solid #e5e7eb;
                        border-radius: 8px;
                        color: #4b5563;
                        font-weight: 600;
                        text-decoration: none;
                        transition: all 0.3s ease;
                    }
                    .pagination a:hover {
                        background: #FF6600;
                        color: white;
                        border-color: #FF6600;
                        transform: translateY(-2px);
                        box-shadow: 0 4px 12px rgba(255, 102, 0, 0.3);
                    }
                    .pagination .current {
                        background: #FF6600;
                        color: white;
                        border-color: #FF6600;
                        box-shadow: 0 4px 12px rgba(255, 102, 0, 0.3);
                    }
                    .pagination .dots {
                        border: none;
                        background: transparent;
                        color: #9ca3af;
                    }
                </style>';
                echo '<div class="pagination">';
                echo paginate_links(array(
                    'total' => $the_query->max_num_pages,
                    'current' => $paged,
                    'prev_text' => 'Précédent',
                    'next_text' => 'Suivant',
                    'mid_size' => 2,
                    'type' => 'plain',
                ));
                echo '</div>';
                echo '</div>';

                wp_reset_postdata();
            else:
                ?>
                <div class="col-span-full text-center py-20 bg-gray-50 rounded-2xl border border-dashed border-gray-300">
                    <i class="far fa-newspaper text-4xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-400">Aucun article publié pour le moment.</h3>
                    <p class="text-gray-400 mt-2">Revenez bientôt pour découvrir nos actualités.</p>
                </div>
                <?php
            endif;
            ?>
        </div>
    <?php endif; ?>
</div>

<script>
    // Système de filtrage des articles par catégorie
    document.addEventListener('DOMContentLoaded', function () {
        const filterButtons = document.querySelectorAll('.category-filter');
        const articles = document.querySelectorAll('.article-card');

        filterButtons.forEach(button => {
            button.addEventListener('click', function () {
                const selectedCategory = this.dataset.category;

                // Update active button
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');

                // Filter articles
                articles.forEach(article => {
                    if (selectedCategory === 'all') {
                        article.classList.remove('hidden');
                    } else {
                        const articleCategories = article.dataset.categories.split(' ');
                        if (articleCategories.includes(selectedCategory)) {
                            article.classList.remove('hidden');
                        } else {
                            article.classList.add('hidden');
                        }
                    }
                });
            });
        });
    });
</script>

<?php include get_template_directory() . "/footer-content.php";
wp_footer(); ?>--- FILE: theme/header.php ---
<!DOCTYPE html>
<html <?php language_attributes(); ?>>

<head>
    <meta charset="<?php bloginfo('charset'); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?php wp_title('|', true, 'right'); ?></title>
    <?php wp_head(); ?>
    <style>
        /* Dropdown Menu Animation */
        .group:hover .group-hover\:visible {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }

        /* Mobile Menu Animation */
        #mobile-menu {
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }

        #mobile-menu.open {
            max-height: 100vh;
            opacity: 1;
        }

        /* Glassmorphism Header */
        .header-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
    </style>
</head>

<body <?php body_class('bg-white text-oblink-gray font-body'); ?>>

    <?php
    $current_role = oblink_get_user_role();
    $user_display_name = is_user_logged_in() ? wp_get_current_user()->display_name : '';
    $user_avatar_initial = $user_display_name ? substr($user_display_name, 0, 1) : '?';
    ?>

    <!-- Smart Header -->
    <header class="fixed w-full top-0 z-50 transition-all duration-300 header-glass shadow-sm" id="main-header">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">

                <!-- 1. LEFT: LOGO (Constant) -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="<?php echo home_url('/'); ?>" class="flex items-center group no-underline">
                        <div
                            class="px-3 py-1 bg-oblink-orange rounded flex items-center justify-center transform group-hover:scale-105 transition-transform duration-300">
                            <span class="text-white font-bold text-xl tracking-wide"
                                style="font-family: 'Overpass', sans-serif;">OBLINK</span>
                        </div>
                        <?php if ($current_role !== 'visitor'): ?>
                            <span
                                class="ml-3 text-xs font-bold uppercase tracking-widest text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full border border-gray-200">
                                <?php
                                switch ($current_role) {
                                    case 'student':
                                        echo 'Étudiant';
                                        break;
                                    case 'freelance':
                                        echo 'Expert Certifié';
                                        break;
                                    case 'recruiter':
                                        echo 'Recruteur';
                                        break;
                                }
                                ?>
                            </span>
                        <?php endif; ?>
                    </a>
                </div>

                <!-- 2. CENTER: NAVIGATION (Dynamic) -->
                <nav class="hidden md:flex space-x-8">

                    <?php if ($current_role === 'visitor'): ?>
                        <!-- === VISITOR MENU === -->

                        <!-- Académie Dropdown -->
                        <div class="relative group">
                            <button
                                class="text-oblink-gray group-hover:text-oblink-orange font-medium flex items-center transition outline-none py-5">
                                <span>Académie</span>
                                <i class="fas fa-chevron-down ml-2 text-xs transition-transform group-hover:rotate-180"></i>
                            </button>
                            <div
                                class="absolute left-1/2 transform -translate-x-1/2 mt-0 w-80 bg-white rounded-xl shadow-xl border border-gray-100 opacity-0 invisible group-hover:visible transition-all duration-200 z-50 top-full">
                                <div class="p-3 space-y-2">
                                    <a href="<?php echo home_url('/pass-examen'); ?>"
                                        class="block px-4 py-3 rounded-lg hover:bg-orange-50 transition">
                                        <p class="text-sm font-bold text-gray-900">Pass Examen BTS</p>
                                        <p class="text-xs text-gray-500">Quiz IA & Annales 2026</p>
                                    </a>
                                    <a href="<?php echo home_url('/formation-erp'); ?>"
                                        class="block px-4 py-3 rounded-lg hover:bg-orange-50 transition">
                                        <p class="text-sm font-bold text-gray-900">Formations ERP</p>
                                        <p class="text-xs text-gray-500">Devenez Expert Cosium</p>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <a href="<?php echo home_url('/simulateur'); ?>"
                            class="text-oblink-gray hover:text-oblink-orange font-medium transition">Simulateur Salaire</a>
                        <a href="<?php echo home_url('/abonnements'); ?>"
                            class="text-oblink-gray hover:text-oblink-orange font-medium transition">Tarifs</a>


                    <?php elseif ($current_role === 'student'): ?>
                        <!-- === STUDENT MENU === -->
                        <a href="<?php echo home_url('/dashboard'); ?>"
                            class="text-oblink-gray hover:text-oblink-orange font-medium transition flex items-center gap-2">
                            <i class="fas fa-chart-pie text-gray-400"></i> Dashboard
                        </a>
                        <a href="<?php echo home_url('/academie'); ?>"
                            class="text-oblink-gray hover:text-oblink-orange font-medium transition flex items-center gap-2">
                            <i class="fas fa-brain text-gray-400"></i> Outils IA
                        </a>
                        <!-- "Passer Expert" Promo Link -->
                        <a href="<?php echo home_url('/formation-erp'); ?>"
                            class="text-oblink-violet font-bold hover:text-oblink-violet/80 transition flex items-center gap-2 animate-pulse">
                            <i class="fas fa-certificate"></i> Devenir Expert
                        </a>

                    <?php elseif ($current_role === 'freelance'): ?>
                        <!-- === FREELANCE MENU === -->
                        <a href="<?php echo home_url('/missions'); ?>"
                            class="text-oblink-gray hover:text-oblink-orange font-medium transition flex items-center gap-2">
                            <i class="fas fa-briefcase text-gray-400"></i> Trouver une mission
                        </a>
                        <a href="<?php echo home_url('/mes-certifications'); ?>"
                            class="text-oblink-gray hover:text-oblink-orange font-medium transition flex items-center gap-2">
                            <i class="fas fa-award text-gray-400"></i> Mes Certifs
                        </a>
                        <a href="<?php echo home_url('/formation-erp'); ?>"
                            class="text-oblink-gray hover:text-oblink-orange font-medium transition flex items-center gap-2">
                            <i class="fas fa-graduation-cap text-gray-400"></i> Se former
                        </a>

                    <?php elseif ($current_role === 'recruiter'): ?>
                        <!-- === RECRUITER MENU === -->
                        <a href="<?php echo home_url('/admin-dashboard'); ?>"
                            class="text-oblink-gray hover:text-oblink-blue font-medium transition flex items-center gap-2">
                            <i class="fas fa-tachometer-alt text-gray-400"></i> Pilotage
                        </a>
                        <a href="<?php echo home_url('/recherche-opticiens'); ?>"
                            class="text-oblink-gray hover:text-oblink-blue font-medium transition flex items-center gap-2">
                            <i class="fas fa-search text-gray-400"></i> CV-thèque
                        </a>
                        <a href="<?php echo home_url('/mes-annonces'); ?>"
                            class="text-oblink-gray hover:text-oblink-blue font-medium transition flex items-center gap-2">
                            <i class="fas fa-bullhorn text-gray-400"></i> Mes Annonces
                        </a>
                    <?php endif; ?>

                </nav>

                <!-- 3. RIGHT: ACTIONS (Dynamic) -->
                <div class="hidden md:flex items-center space-x-4">

                    <?php if ($current_role === 'visitor'): ?>
                        <!-- Visitor Actions -->
                        <a href="<?php echo home_url('/login'); ?>"
                            class="text-sm font-semibold text-gray-500 hover:text-oblink-orange transition">Connexion</a>
                        <a href="<?php echo home_url('/inscription-opticien'); ?>"
                            class="px-5 py-2.5 bg-oblink-orange text-white rounded-lg font-bold shadow hover:bg-oblink-orange/90 transition transform hover:-translate-y-0.5">
                            Accès Membre
                        </a>

                    <?php else: ?>
                        <!-- Logged In Actions (Shared Structure with Role specifics) -->
                        <div class="flex items-center space-x-4 relative group">
                            <button class="flex items-center space-x-2 focus:outline-none">
                                <div class="text-right hidden lg:block">
                                    <p class="text-sm font-bold text-gray-900 leading-none">
                                        <?php echo $user_display_name; ?></p>
                                    <p class="text-xs text-gray-500 mt-1">
                                        <?php echo ucfirst($current_role); ?>
                                    </p>
                                </div>
                                <div
                                    class="w-10 h-10 rounded-full bg-gradient-to-br from-oblink-orange to-orange-400 text-white flex items-center justify-center font-bold shadow-md ring-2 ring-white">
                                    <?php echo $user_avatar_initial; ?>
                                </div>
                            </button>
                            <!-- User Dropdown -->
                            <div
                                class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 py-2 opacity-0 invisible group-hover:visible transition-all duration-200 z-50">
                                <a href="<?php echo home_url('/profil'); ?>"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Mon Profil</a>
                                <a href="<?php echo home_url('/compte'); ?>"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Réglages</a>
                                <div class="border-t border-gray-100 my-1"></div>
                                <a href="<?php echo wp_logout_url(home_url()); ?>"
                                    class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">Déconnexion</a>
                            </div>
                        </div>
                    <?php endif; ?>

                </div>

                <!-- MOBILE MENU BUTTON -->
                <div class="flex md:hidden">
                    <button type="button" class="text-oblink-gray hover:text-oblink-orange focus:outline-none"
                        id="mobile-menu-btn">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- MOBILE MENU (Simplified for V1) -->
        <div id="mobile-menu" class="bg-white border-t border-gray-100 md:hidden shadow-xl">
            <div class="px-4 pt-4 pb-6 space-y-2">

                <?php if ($current_role === 'visitor'): ?>
                    <a href="<?php echo home_url('/pass-examen'); ?>"
                        class="block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md">Pass
                        Examen</a>
                    <a href="<?php echo home_url('/simulateur'); ?>"
                        class="block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 rounded-md">Simulateur</a>
                    <div class="border-t border-gray-100 my-2"></div>
                    <a href="<?php echo home_url('/login'); ?>"
                        class="block px-3 py-2 text-base font-medium text-oblink-orange">Connexion</a>

                <?php elseif ($current_role === 'student'): ?>
                    <a href="<?php echo home_url('/dashboard'); ?>"
                        class="block px-3 py-2 text-base font-medium text-gray-700">Dashboard</a>
                    <a href="<?php echo home_url('/academie'); ?>"
                        class="block px-3 py-2 text-base font-medium text-gray-700">Quiz IA</a>
                    <a href="<?php echo home_url('/formation-erp'); ?>"
                        class="block px-3 py-2 text-base font-bold text-oblink-violet">Devenir Expert</a>

                <?php elseif ($current_role === 'freelance'): ?>
                    <a href="<?php echo home_url('/missions'); ?>"
                        class="block px-3 py-2 text-base font-medium text-gray-700">Missions</a>
                    <a href="<?php echo home_url('/mes-certifications'); ?>"
                        class="block px-3 py-2 text-base font-medium text-gray-700">Certifications</a>

                <?php elseif ($current_role === 'recruiter'): ?>
                    <a href="<?php echo home_url('/admin-dashboard'); ?>"
                        class="block px-3 py-2 text-base font-bold text-oblink-blue">Pilotage</a>
                    <a href="<?php echo home_url('/recherche-opticiens'); ?>"
                        class="block px-3 py-2 text-base font-medium text-gray-700">CV-thèque</a>
                <?php endif; ?>

                <?php if ($current_role !== 'visitor'): ?>
                    <div class="border-t border-gray-100 my-2 pt-2">
                        <a href="<?php echo wp_logout_url(home_url()); ?>" class="block px-3 py-2 text-sm text-red-600">Se
                            déconnecter</a>
                    </div>
                <?php endif; ?>
            </div>
        </div>
    </header>

    <!-- Spacer -->
    <div class="h-20"></div>

    <!-- Scripts -->
    <script>
        document.getElementById('mobile-menu-btn').addEventListener('click', function () {
            document.getElementById('mobile-menu').classList.toggle('open');
        });
    </script>--- FILE: theme/footer.php ---
</main><!-- Close Main -->

<!-- FOOTER -->
<!-- Added inline styles to force visibility even if Tailwind fails -->
<footer id="main-footer" class="bg-gray-900 text-white pt-12 pb-6 relative z-10"
        style="background-color: #1F2937 !important; color: #FFFFFF !important; border-top: 4px solid #FF6600; position: relative; width: 100%; display: block !important;">

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">

                        <!-- Brand & Mission -->
                        <div class="space-y-4">
                                <a href="<?php echo home_url('/'); ?>"
                                        class="inline-block text-2xl font-black tracking-tight"
                                        style="font-family: 'Overpass', sans-serif; text-decoration: none;">
                                        <span style="color:#FFF">OB</span><span style="color:#FF6600">LINK</span><span
                                                style="color:#0099FF">.</span>
                                </a>
                                <p class="text-sm leading-relaxed" style="color: #9CA3AF; max-width: 280px;">
                                        La première plateforme de mise en relation directe entre Opticiens Freelances et
                                        Magasins d'Optique.
                                </p>
                        </div>

                        <!-- Navigation Freelances -->
                        <div>
                                <h3 class="text-base font-bold mb-4" style="color:#FFF;">Pour les Opticiens</h3>
                                <ul class="space-y-2 text-sm" style="color: #9CA3AF;">
                                        <li><a href="<?php echo home_url('/inscription-opticien'); ?>"
                                                        class="hover:text-white transition"
                                                        style="color:inherit">Inscription Freelance</a></li>
                                        <li><a href="<?php echo home_url('/emploi-opticien'); ?>"
                                                        class="hover:text-white transition" style="color:inherit">Offres
                                                        d'emploi</a></li>
                                        <li><a href="<?php echo home_url('/simulateur'); ?>"
                                                        class="hover:text-white transition"
                                                        style="color:inherit">Simulateur de Revenus</a></li>
                                        <li><a href="<?php echo home_url('/formation-erp'); ?>"
                                                        class="hover:text-white transition"
                                                        style="color:inherit">Académie Oblink</a></li>
                                </ul>
                        </div>

                        <!-- Navigation Entreprises -->
                        <div>
                                <h3 class="text-base font-bold mb-4" style="color:#FFF;">Pour les Magasins</h3>
                                <ul class="space-y-2 text-sm" style="color: #9CA3AF;">
                                        <li><a href="<?php echo home_url('/inscription-entreprise'); ?>"
                                                        class="hover:text-white transition"
                                                        style="color:inherit">Recruter un Opticien</a></li>
                                        <li><a href="<?php echo home_url('/recherche-opticiens'); ?>"
                                                        class="hover:text-white transition"
                                                        style="color:inherit">CV-thèque</a></li>
                                        <li><a href="<?php echo home_url('/abonnements'); ?>"
                                                        class="hover:text-white transition" style="color:inherit">Tarifs
                                                        & Abonnements</a></li>
                                        <li><a href="<?php echo home_url('/generateur-contrat'); ?>"
                                                        class="hover:text-white transition"
                                                        style="color:inherit">Générateur de Contrat</a></li>
                                </ul>
                        </div>

                        <!-- Légal & Support -->
                        <div>
                                <h3 class="text-base font-bold mb-4" style="color:#FFF;">Informations</h3>
                                <ul class="space-y-2 text-sm" style="color: #9CA3AF;">
                                        <li><a href="<?php echo home_url('/a-propos'); ?>"
                                                        class="hover:text-white transition" style="color:inherit">À
                                                        propos</a></li>
                                        <li><a href="<?php echo home_url('/blog'); ?>"
                                                        class="hover:text-white transition" style="color:inherit">Le
                                                        Blog</a></li>
                                        <li><a href="mailto:contact@oblink.fr" class="hover:text-white transition"
                                                        style="color:inherit">Contact & Support</a></li>
                                        <li><a href="<?php echo home_url('/mentions-legales'); ?>"
                                                        class="hover:text-white transition"
                                                        style="color:inherit">Mentions Légales</a></li>
                                </ul>
                        </div>

                </div>

                <div class="border-t border-gray-800 pt-6 flex flex-col md:flex-row justify-between items-center gap-4 text-xs"
                        style="border-top-color: #374151; color: #6B7280;">
                        <div class="flex flex-col md:flex-row items-center gap-4">
                                <p>&copy; <?php echo date('Y'); ?> OBLINK. Tous droits réservés.</p>
                                <div class="flex items-center gap-4">
                                        <!-- Social Links -->
                                        <a href="#" class="text-gray-400 hover:text-white transition"><i
                                                        class="fab fa-linkedin-in text-lg"></i></a>
                                        <a href="#" class="text-gray-400 hover:text-white transition"><i
                                                        class="fab fa-instagram text-lg"></i></a>
                                        <a href="#" class="text-gray-400 hover:text-white transition"><i
                                                        class="fab fa-facebook-f text-lg"></i></a>
                                </div>
                        </div>

                        <div class="flex items-center gap-2">
                                <span class="w-2 h-2 rounded-full bg-green-500"
                                        style="background-color: #10B981; display:inline-block"></span>
                                <span>Système Opérationnel - <?php echo date('d/m/Y'); ?></span>
                        </div>
                </div>

        </div>
</footer>

<?php wp_footer(); ?>
</body>

</html>--- FILE: theme/style.css ---
/*
Theme Name: OBLINK Theme
Theme URI: https://oblink.fr
Author: OBLINK Team
Author URI: https://oblink.fr
Description: Custom WordPress theme for OBLINK - Optician Logic Link
Version: 1.0
License: GNU General Public License v2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html
Text Domain: oblink
*/

/* OBLINK - Apple Vision Pro Glassmorphism Style */

* {
    font-family: 'Inter', sans-serif;
}

h1,
h2,
h3,
h4,
h5,
h6,
.font-display {
    font-family: 'Overpass', sans-serif;
}

html {
    scroll-behavior: smooth;
}

body {
    background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);
}

/* ===== GLASSMORPHISM COMPONENTS ===== */

.glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
}

.glass-dark {
    background: rgba(48, 48, 48, 0.8);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
}

.glass-gradient {
    background: linear-gradient(135deg,
            rgba(255, 102, 0, 0.1) 0%,
            rgba(98, 146, 158, 0.1) 50%,
            rgba(154, 72, 208, 0.1) 100%);
    backdrop-filter: blur(30px) saturate(200%);
    -webkit-backdrop-filter: blur(30px) saturate(200%);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

/* ===== SMOOTH ANIMATIONS ===== */

@keyframes float {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-20px);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes shimmer {
    0% {
        background-position: -1000px 0;
    }

    100% {
        background-position: 1000px 0;
    }
}

.animate-float {
    animation: float 6s ease-in-out infinite;
}

.animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out;
}

.animate-fade-in {
    animation: fadeIn 1s ease-out;
}

.animate-scale-in {
    animation: scaleIn 0.6s ease-out;
}

/* ===== NAVIGATION ===== */

#navbar {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.nav-link {
    position: relative;
    transition: color 0.3s ease;
}

.nav-link::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 50%;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #FF6600, #9A48D0);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateX(-50%);
}

.nav-link:hover::after {
    width: 100%;
}

/* ===== HERO SECTION ===== */

#hero {
    position: relative;
    overflow: hidden;
}

.hero-bg {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg,
            rgba(255, 102, 0, 0.03) 0%,
            rgba(98, 146, 158, 0.03) 50%,
            rgba(154, 72, 208, 0.03) 100%);
    z-index: 0;
}

.hero-gradient-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0.3;
    animation: float 8s ease-in-out infinite;
}

.orb-1 {
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(255, 102, 0, 0.4), transparent);
    top: 10%;
    left: 10%;
    animation-delay: 0s;
}

.orb-2 {
    width: 350px;
    height: 350px;
    background: radial-gradient(circle, rgba(98, 146, 158, 0.4), transparent);
    top: 50%;
    right: 10%;
    animation-delay: 2s;
}

.orb-3 {
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(154, 72, 208, 0.4), transparent);
    bottom: 10%;
    left: 40%;
    animation-delay: 4s;
}

/* ===== LIQUID GLASS EFFECTS ===== */

@keyframes liquid-morph {

    0%,
    100% {
        border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        transform: translate(0, 0) scale(1);
    }

    25% {
        border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
        transform: translate(20px, -20px) scale(1.05);
    }

    50% {
        border-radius: 50% 60% 30% 60% / 30% 60% 70% 40%;
        transform: translate(-20px, 20px) scale(0.95);
    }

    75% {
        border-radius: 60% 40% 60% 40% / 70% 30% 50% 60%;
        transform: translate(-20px, -20px) scale(1.02);
    }
}

@keyframes glow-pulse {

    0%,
    100% {
        opacity: 0.3;
        filter: blur(40px);
    }

    50% {
        opacity: 0.6;
        filter: blur(60px);
    }
}

.liquid-glass-blob {
    position: absolute;
    width: 300px;
    height: 300px;
    border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
    filter: blur(60px);
    opacity: 0.4;
    animation: liquid-morph 15s ease-in-out infinite;
    pointer-events: none;
}

.blob-1 {
    background: linear-gradient(135deg, rgba(255, 102, 0, 0.3), rgba(255, 102, 0, 0.1));
    top: -100px;
    left: -50px;
    animation-delay: 0s;
}

.blob-2 {
    background: linear-gradient(135deg, rgba(98, 146, 158, 0.3), rgba(98, 146, 158, 0.1));
    top: 50%;
    right: -100px;
    animation-delay: 5s;
    width: 400px;
    height: 400px;
}

.blob-3 {
    background: linear-gradient(135deg, rgba(154, 72, 208, 0.3), rgba(154, 72, 208, 0.1));
    bottom: -150px;
    left: 30%;
    animation-delay: 10s;
    width: 350px;
    height: 350px;
}

/* ===== COMPACT SERVICE CARDS - LIQUID GLASS ===== */

.service-card-liquid {
    position: relative;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: center;
    overflow: hidden;
}

.service-card-liquid::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg,
            rgba(255, 102, 0, 0.1),
            rgba(154, 72, 208, 0.1));
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: 0;
}

.service-card-liquid:hover::before {
    opacity: 1;
}

.service-card-liquid:hover {
    transform: translateY(-8px) scale(1.05);
    box-shadow: 0 20px 40px rgba(255, 102, 0, 0.2);
    border-color: rgba(255, 102, 0, 0.3);
}

.service-icon-mini {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 0.75rem;
    font-size: 1.25rem;
    color: white;
    transition: all 0.4s ease;
    position: relative;
    z-index: 1;
}

.service-card-liquid:hover .service-icon-mini {
    transform: rotateY(360deg) scale(1.1);
    box-shadow: 0 8px 20px rgba(255, 102, 0, 0.4),
        0 0 40px rgba(255, 102, 0, 0.3),
        0 0 60px rgba(154, 72, 208, 0.2);
    animation: tech-glow 2s ease-in-out infinite;
}

@keyframes tech-glow {

    0%,
    100% {
        filter: brightness(1);
    }

    50% {
        filter: brightness(1.2);
    }
}

.service-card-liquid h3 {
    position: relative;
    z-index: 1;
    transition: color 0.3s ease;
}

.service-card-liquid:hover h3 {
    color: #FF6600;
}

/* ===== COMPACT TESTIMONIALS - LIQUID GLASS ===== */

.testimonial-card-liquid {
    position: relative;
    padding: 1.25rem;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(25px) saturate(180%);
    -webkit-backdrop-filter: blur(25px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.6);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(31, 38, 135, 0.15);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
}

.testimonial-card-liquid::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg,
            transparent,
            rgba(255, 102, 0, 0.1),
            transparent);
    transform: rotate(45deg);
    transition: all 0.6s ease;
}

.testimonial-card-liquid:hover::before {
    left: 100%;
}

.testimonial-card-liquid:hover {
    transform: translateY(-4px);
    box-shadow: 0 15px 40px rgba(255, 102, 0, 0.15);
    border-color: rgba(255, 102, 0, 0.3);
}

.testimonial-avatar-mini {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #62929E, #9A48D0);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1rem;
    flex-shrink: 0;
    box-shadow: 0 4px 12px rgba(98, 146, 158, 0.3);
    transition: all 0.3s ease;
}

.testimonial-card-liquid:hover .testimonial-avatar-mini {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 6px 16px rgba(98, 146, 158, 0.4),
        0 0 30px rgba(98, 146, 158, 0.3),
        0 0 50px rgba(154, 72, 208, 0.2);
    animation: avatar-glow 2s ease-in-out infinite;
}

@keyframes avatar-glow {

    0%,
    100% {
        filter: brightness(1) saturate(1);
    }

    50% {
        filter: brightness(1.15) saturate(1.2);
    }
}

/* ===== PARTICLES BACKGROUND ===== */

.particle-container {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    border-radius: 50%;
    opacity: 0.3;
    animation: particle-float 15s ease-in-out infinite;
}

@keyframes particle-float {

    0%,
    100% {
        transform: translate(0, 0);
        opacity: 0.3;
    }

    25% {
        transform: translate(50px, -50px);
        opacity: 0.6;
    }

    50% {
        transform: translate(-30px, 30px);
        opacity: 0.4;
    }

    75% {
        transform: translate(40px, 20px);
        opacity: 0.5;
    }
}

/* ===== BLOG FILTERS ===== */

.filter-btn {
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    color: #393D3F;
    transition: all 0.3s ease;
}

.filter-btn.active {
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    color: white;
    border: none;
    box-shadow: 0 8px 16px rgba(255, 102, 0, 0.3);
    transform: translateY(-2px);
}

.filter-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

.article-card {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

/* ===== 3D CAROUSEL - ORIGINAL ===== */

.carousel-3d-container {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    perspective: 2000px;
    height: 500px;
}

.carousel-3d {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
}

.carousel-3d-item {
    position: absolute;
    width: 100%;
    max-width: 600px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    pointer-events: none;
}

.carousel-3d-item.active {
    opacity: 1;
    transform: translate(-50%, -50%) translateZ(0) scale(1);
    z-index: 10;
    pointer-events: auto;
}

.carousel-3d-item.prev {
    opacity: 0.4;
    transform: translate(-50%, -50%) translateX(-400px) translateZ(-200px) rotateY(25deg) scale(0.8);
    z-index: 5;
}

.carousel-3d-item.next {
    opacity: 0.4;
    transform: translate(-50%, -50%) translateX(400px) translateZ(-200px) rotateY(-25deg) scale(0.8);
    z-index: 5;
}

.process-card-glass {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(30px) saturate(180%);
    -webkit-backdrop-filter: blur(30px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: 32px;
    padding: 3rem;
    box-shadow: 0 20px 60px rgba(31, 38, 135, 0.2);
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
}

.process-card-glass::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg,
            transparent,
            rgba(255, 102, 0, 0.1),
            transparent);
    transform: rotate(45deg);
    transition: all 0.6s ease;
}

.carousel-3d-item.active .process-card-glass:hover::before {
    left: 100%;
}

.carousel-3d-item.active .process-card-glass:hover {
    transform: translateY(-10px);
    box-shadow: 0 30px 80px rgba(255, 102, 0, 0.25);
    border-color: rgba(255, 102, 0, 0.3);
}

.process-number {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, rgba(255, 102, 0, 0.1), rgba(154, 72, 208, 0.1));
    border: 3px solid rgba(255, 102, 0, 0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    font-weight: 800;
    margin: 0 auto 2rem;
    transition: all 0.4s ease;
    font-family: 'Montserrat', sans-serif;
}

.carousel-3d-item.active .process-card-glass:hover .process-number {
    transform: rotateY(360deg) scale(1.1);
    box-shadow: 0 0 40px rgba(255, 102, 0, 0.4);
    background: linear-gradient(135deg, rgba(255, 102, 0, 0.2), rgba(154, 72, 208, 0.2));
}

/* Carousel Controls */
.carousel-controls {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    display: flex;
    justify-content: space-between;
    padding: 0 2rem;
    pointer-events: none;
    z-index: 100;
    /* Increased from 20 to prevent overlap */
}

.carousel-btn {
    width: 60px;
    height: 60px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 102, 0, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #FF6600;
    font-size: 1.25rem;
    pointer-events: auto;
    box-shadow: 0 8px 24px rgba(31, 38, 135, 0.15);
}

.carousel-btn:hover {
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    color: white;
    transform: scale(1.1);
    box-shadow: 0 12px 32px rgba(255, 102, 0, 0.3);
}

.carousel-btn:active {
    transform: scale(0.95);
}

/* Carousel Indicators */
.carousel-indicators {
    position: absolute;
    bottom: -60px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    z-index: 20;
}

.carousel-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 102, 0, 0.2);
    border: 2px solid rgba(255, 102, 0, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
}

.carousel-indicator.active {
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    border-color: #FF6600;
    transform: scale(1.5);
    box-shadow: 0 0 20px rgba(255, 102, 0, 0.5);
}

.carousel-indicator:hover {
    transform: scale(1.3);
    background: rgba(255, 102, 0, 0.5);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .carousel-3d-container {
        height: 450px;
    }

    .carousel-3d-item.prev,
    .carousel-3d-item.next {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.7);
    }

    .process-card-glass {
        padding: 2rem;
    }

    .process-number {
        width: 60px;
        height: 60px;
        font-size: 2rem;
    }

    /* HIDE carousel arrows on mobile */
    .carousel-controls {
        display: none;
    }

    /* Keep indicators visible */
    .carousel-indicators {
        bottom: -40px;
    }
}

/* ===== COMPACT CAROUSEL - UX OPTIMIZED ===== */

.carousel-compact-container {
    position: relative;
    max-width: 900px;
    margin: 0 auto;
}

/* Progress Bar */
.carousel-progress-bar {
    position: relative;
}

.progress-track {
    height: 3px;
    background: rgba(255, 102, 0, 0.1);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 1rem;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #FF6600, #9A48D0);
    width: 33.33%;
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
}

.progress-steps {
    display: flex;
    justify-content: space-between;
    position: relative;
    margin-bottom: 2rem;
}

.progress-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    flex: 1;
    cursor: pointer;
    transition: all 0.3s ease;
}

.step-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 102, 0, 0.2);
    border: 2px solid rgba(255, 102, 0, 0.3);
    transition: all 0.3s ease;
}

.progress-step.active .step-dot {
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    border-color: #FF6600;
    box-shadow: 0 0 15px rgba(255, 102, 0, 0.5);
    transform: scale(1.3);
}

.step-label {
    font-size: 0.75rem;
    color: #393D3F;
    opacity: 0.5;
    transition: all 0.3s ease;
    font-weight: 600;
}

.progress-step.active .step-label {
    opacity: 1;
    color: #FF6600;
}

/* Compact Carousel */
.carousel-3d-compact {
    position: relative;
    height: 200px;
    perspective: 1000px;
    margin-bottom: 2rem;
}

@media (max-width: 768px) {
    .carousel-3d-compact {
        height: 240px;
    }
}

.carousel-compact-item {
    position: absolute;
    width: 100%;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    transform: translateX(50%) scale(0.9);
    pointer-events: none;
}

.carousel-compact-item.active {
    opacity: 1;
    transform: translateX(0) scale(1);
    pointer-events: auto;
    z-index: 10;
}

.carousel-compact-item.prev {
    opacity: 0.3;
    transform: translateX(-100%) scale(0.85);
}

.carousel-compact-item.next {
    opacity: 0.3;
    transform: translateX(100%) scale(0.85);
}

/* Process Cards - Compact */
.process-card-compact {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.6);
    border-radius: 20px;
    padding: 1.5rem;
    box-shadow: 0 10px 40px rgba(31, 38, 135, 0.1);
    transition: all 0.3s ease;
}

.process-card-compact:hover {
    transform: translateY(-4px);
    box-shadow: 0 15px 50px rgba(255, 102, 0, 0.15);
    border-color: rgba(255, 102, 0, 0.3);
}

.process-icon-compact {
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
    flex-shrink: 0;
    box-shadow: 0 8px 20px rgba(255, 102, 0, 0.3);
    transition: all 0.4s ease;
}

.process-card-compact:hover .process-icon-compact {
    transform: rotateY(360deg) scale(1.1);
    box-shadow: 0 10px 30px rgba(255, 102, 0, 0.4),
        0 0 40px rgba(255, 102, 0, 0.2);
}

.process-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.process-badge.orange {
    background: linear-gradient(135deg, rgba(255, 102, 0, 0.15), rgba(255, 102, 0, 0.05));
    color: #FF6600;
    border: 1px solid rgba(255, 102, 0, 0.2);
}

.process-badge.blue {
    background: linear-gradient(135deg, rgba(98, 146, 158, 0.15), rgba(98, 146, 158, 0.05));
    color: #62929E;
    border: 1px solid rgba(98, 146, 158, 0.2);
}

.process-badge.violet {
    background: linear-gradient(135deg, rgba(154, 72, 208, 0.15), rgba(154, 72, 208, 0.05));
    color: #9A48D0;
    border: 1px solid rgba(154, 72, 208, 0.2);
}

/* Navigation Compact */
.carousel-nav-compact {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
}

.carousel-btn-compact {
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 102, 0, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #FF6600;
    font-size: 1rem;
    box-shadow: 0 4px 12px rgba(31, 38, 135, 0.1);
}

.carousel-btn-compact:hover {
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    color: white;
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(255, 102, 0, 0.3);
}

.carousel-btn-compact:active {
    transform: scale(0.95);
}

.carousel-counter {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 700;
    color: #393D3F;
}

.current-slide {
    font-size: 1.5rem;
    color: #FF6600;
}

.slide-separator {
    font-size: 1rem;
    color: #393D3F;
    opacity: 0.3;
}

.total-slides {
    font-size: 1rem;
    color: #393D3F;
    opacity: 0.5;
}

/* Auto-play Toggle */
.autoplay-toggle {
    display: inline-flex;
    align-items: center;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 102, 0, 0.2);
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #FF6600;
    font-weight: 600;
}

.autoplay-toggle:hover {
    background: rgba(255, 102, 0, 0.1);
    transform: translateY(-2px);
}

.autoplay-toggle.paused {
    opacity: 0.5;
}

.autoplay-toggle.paused i {
    animation: none;
}

/* Responsive */
@media (max-width: 768px) {
    .process-card-compact {
        padding: 1.25rem;
    }

    .process-icon-compact {
        width: 48px;
        height: 48px;
        font-size: 1.25rem;
    }

    .carousel-nav-compact {
        gap: 1rem;
    }

    .carousel-btn-compact {
        width: 40px;
        height: 40px;
        font-size: 0.875rem;
    }
}

/* ===== CTA CARDS WITH GLASSMORPHISM ===== */

.cta-card-glass {
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 24px;
}

.cta-card-glass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.9),
            rgba(255, 255, 255, 0.7));
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 24px;
    z-index: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.cta-card-glass:hover::before {
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.95),
            rgba(255, 255, 255, 0.8));
}

.cta-card-glass:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
}

.cta-card-content {
    position: relative;
    z-index: 1;
    padding: 2rem;
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.cta-character {
    width: 280px;
    height: 280px;
    object-fit: contain;
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.1));
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.cta-card-glass:hover .cta-character {
    transform: scale(1.05) translateY(-5px);
}

.cta-info {
    flex: 1;
    text-align: left;
}

.cta-badge {
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 1rem;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.cta-badge-optician {
    background: rgba(98, 146, 158, 0.2);
    color: #62929E;
    border: 1px solid rgba(98, 146, 158, 0.3);
}

.cta-badge-company {
    background: rgba(255, 102, 0, 0.2);
    color: #FF6600;
    border: 1px solid rgba(255, 102, 0, 0.3);
}

/* ===== STATS SECTION ===== */

.stat-card-glass {
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    padding: 2rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.stat-card-glass:hover {
    transform: translateY(-5px);
    background: rgba(255, 255, 255, 0.8);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
}

.stat-number {
    font-size: 3rem;
    font-weight: 800;
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
    display: inline-block;
}

/* ===== 3D CAROUSEL ===== */

.carousel-3d-container {
    perspective: 1200px;
    width: 100%;
    height: 500px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.carousel-3d {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.carousel-3d-item {
    position: absolute;
    width: 350px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0.4;
}

.carousel-3d-item.active {
    opacity: 1;
    z-index: 3;
}

.carousel-3d-item.prev {
    transform: translate(-50%, -50%) translateX(-400px) translateZ(-200px) rotateY(25deg);
    z-index: 2;
}

.carousel-3d-item.next {
    transform: translate(-50%, -50%) translateX(400px) translateZ(-200px) rotateY(-25deg);
    z-index: 2;
}

/* Process Card for Carousel */
.process-card-glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 24px;
    padding: 2.5rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.process-card-glass::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg,
            transparent,
            rgba(255, 102, 0, 0.1),
            transparent);
    transform: rotate(45deg);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
}

.carousel-3d-item.active .process-card-glass::before {
    opacity: 1;
    transform: rotate(45deg) translate(50%, 50%);
}

.carousel-3d-item.active .process-card-glass {
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 0 30px 80px rgba(255, 102, 0, 0.2);
    transform: scale(1.05);
}

.process-number {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
}

.process-number::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(135deg, #FF6600, #62929E, #9A48D0);
    border-radius: 50%;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.4s;
}

.carousel-3d-item.active .process-number::before {
    opacity: 0.3;
    animation: spin 3s linear infinite;
}

/* Carousel Controls */
.carousel-controls {
    position: absolute;
    bottom: -60px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 1rem;
    z-index: 10;
}

.carousel-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    color: #FF6600;
    font-size: 1.2rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.carousel-btn:hover {
    background: #FF6600;
    color: white;
    transform: scale(1.1);
    box-shadow: 0 6px 25px rgba(255, 102, 0, 0.3);
}

.carousel-btn:active {
    transform: scale(0.95);
}

/* Carousel Indicators */
.carousel-indicators {
    position: absolute;
    bottom: -100px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 0.75rem;
    z-index: 10;
}

.carousel-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 102, 0, 0.3);
    border: 2px solid rgba(255, 102, 0, 0.5);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.carousel-indicator.active {
    background: #FF6600;
    transform: scale(1.3);
}

.carousel-indicator:hover {
    background: #FF6600;
    transform: scale(1.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .carousel-3d-container {
        height: 450px;
    }

    .carousel-3d-item {
        width: 280px;
    }

    .carousel-3d-item.prev,
    .carousel-3d-item.next {
        transform: translate(-50%, -50%) translateX(0) translateZ(-300px) rotateY(0deg);
        opacity: 0;
    }

    .carousel-controls {
        bottom: -50px;
    }

    .carousel-indicators {
        bottom: -85px;
    }
}

/* ===== FEATURE SECTIONS ===== */

.feature-card-glass {
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 28px;
    padding: 3rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.feature-card-glass:hover {
    background: rgba(255, 255, 255, 0.75);
    transform: scale(1.02);
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.12);
}

.feature-image-wrapper {
    position: relative;
    border-radius: 24px;
    overflow: hidden;
    background: linear-gradient(135deg,
            rgba(255, 102, 0, 0.05),
            rgba(98, 146, 158, 0.05),
            rgba(154, 72, 208, 0.05));
    padding: 3rem;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.feature-character {
    width: 100%;
    height: 400px;
    object-fit: contain;
    filter: drop-shadow(0 15px 40px rgba(0, 0, 0, 0.15));
    animation: float 6s ease-in-out infinite;
}

/* ===== SERVICE CARDS ===== */

.service-card-glass {
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    padding: 2rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.service-card-glass::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg,
            rgba(255, 102, 0, 0),
            rgba(255, 102, 0, 0.1));
    opacity: 0;
    transition: opacity 0.4s;
}

.service-card-glass:hover::after {
    opacity: 1;
}

.service-card-glass:hover {
    transform: translateY(-8px);
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(255, 102, 0, 0.3);
    box-shadow: 0 20px 60px rgba(255, 102, 0, 0.15);
}

.service-icon {
    width: 72px;
    height: 72px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    margin-bottom: 1.5rem;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 18px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #62929E;
    transition: all 0.3s;
    position: relative;
    z-index: 1;
}

.service-card-glass:hover .service-icon {
    transform: scale(1.1) rotate(-5deg);
    color: #FF6600;
    background: rgba(255, 102, 0, 0.1);
}

/* ===== TESTIMONIAL CARDS ===== */

.testimonial-card-glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 24px;
    padding: 2.5rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.testimonial-card-glass::before {
    content: '"';
    position: absolute;
    top: -30px;
    left: 20px;
    font-size: 10rem;
    color: rgba(255, 102, 0, 0.08);
    font-family: Georgia, serif;
    line-height: 1;
}

.testimonial-card-glass:hover {
    transform: translateY(-5px);
    background: rgba(255, 255, 255, 0.85);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);
}

.testimonial-avatar {
    width: 72px;
    height: 72px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg,
            rgba(255, 102, 0, 0.2),
            rgba(98, 146, 158, 0.2));
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.5);
    font-size: 1.5rem;
    margin-right: 1rem;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

/* ===== BUTTONS ===== */

.btn-glass {
    position: relative;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #303030;
    padding: 1rem 2rem;
    border-radius: 16px;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
}

.btn-glass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #FF6600, #9A48D0);
    opacity: 0;
    transition: opacity 0.3s;
    z-index: -1;
}

.btn-glass:hover::before {
    opacity: 1;
}

.btn-glass:hover {
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 12px 30px rgba(255, 102, 0, 0.3);
}

.btn-primary-glass {
    background: linear-gradient(135deg, #FF6600, #FF8533);
    border: none;
    color: white;
}

.btn-primary-glass:hover {
    background: linear-gradient(135deg, #e55a00, #FF6600);
    box-shadow: 0 15px 40px rgba(255, 102, 0, 0.4);
}

/* ===== FOOTER ===== */

footer.glass-dark {
    margin-top: 4rem;
}

/* ===== MOTION DESIGN HELPERS ===== */

.motion-safe {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-scale:hover {
    transform: scale(1.02);
}

.hover-lift:hover {
    transform: translateY(-4px);
}

/* ===== SCROLLBAR ===== */

::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #FF6600, #9A48D0);
    border-radius: 10px;
    border: 2px solid rgba(255, 255, 255, 0.1);
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #e55a00, #8839b8);
}

/* ===== RESPONSIVE ===== */

@media (max-width: 768px) {
    .hero-gradient-orb {
        width: 250px !important;
        height: 250px !important;
    }

    .cta-character {
        width: 200px;
        height: 200px;
    }

    .feature-character {
        height: 300px;
    }

    .cta-card-content {
        flex-direction: column;
        text-align: center;
    }

    .cta-info {
        text-align: center;
    }

    .stat-number {
        font-size: 2rem;
    }
}

/* ===== ACCESSIBILITY ===== */

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}--- FILE: theme/front-page.php ---
<?php
/*
Template Name: Accueil (Front Page)
*/
include 'header-inc.php';
?>

<!-- Hero Section with Glassmorphism -->
<section class="pt-24 md:pt-32 pb-12 md:pb-20 relative overflow-hidden" id="hero">
    <!-- Background gradient orbs -->
    <div class="hero-bg"></div>
    <div class="hero-gradient-orb orb-1"></div>
    <div class="hero-gradient-orb orb-2"></div>
    <div class="hero-gradient-orb orb-3"></div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center">
            <div class="inline-flex items-center px-4 py-2 bg-white rounded-full shadow-sm mb-6 animate-fade-in-down">
                <span class="w-2 h-2 bg-green-500 rounded-full mr-2 pulse-animation"></span>
                <span class="text-sm text-oblink-gray">+500 candidats actifs • +200 magasins partenaires</span>
            </div>
            <h1 class="text-5xl md:text-6xl font-bold mb-6 animate-fade-in"
                style="font-family: 'Montserrat', sans-serif;">
                <span class="text-oblink-orange">L'Optique</span><br />
                <span class="text-oblink-gray">en un clin d'œil</span>
            </h1>
            <p class="text-xl text-oblink-gray/80 mb-12 max-w-3xl mx-auto animate-fade-in-up">
                OBLINK connecte <strong>tous les professionnels de l'optique</strong> (opticiens, vendeurs, monteurs,
                audioprothésistes, VRP...) aux magasins qui recrutent.
                Simple, rapide, fiable.
            </p>

            <!-- CTA Cards with Glassmorphism and Characters -->
            <div class="flex flex-col md:flex-row gap-8 justify-center items-stretch max-w-6xl mx-auto">
                <a href="<?php echo home_url('/opticien-2'); ?>"
                    class="cta-card-glass group w-full md:w-1/2 animate-scale-in" style="animation-delay: 0.2s">
                    <div class="cta-card-content flex-col md:flex-row">
                        <img src="<?php echo get_template_directory_uri(); ?>/images/optician.png" alt="Opticien"
                            class="cta-character animate-float">
                        <div class="cta-info">
                            <span class="cta-badge cta-badge-optician">
                                <i class="fas fa-user-tie mr-2"></i>CANDIDAT
                            </span>
                            <h3 class="text-2xl md:text-3xl font-bold text-oblink-gray mb-3">
                                Je cherche des missions
                            </h3>
                            <p class="text-oblink-gray/70 mb-6">
                                Opticien, vendeur, commercial ? Accédez à des missions qualifiées partout en France.
                            </p>
                            <div class="flex items-center text-oblink-blue font-semibold">
                                Créer mon profil
                                <i class="fas fa-arrow-right ml-2 group-hover:translate-x-2 transition-transform"></i>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="<?php echo home_url('/pour-entreprise'); ?>"
                    class="cta-card-glass group w-full md:w-1/2 animate-scale-in" style="animation-delay: 0.4s">
                    <div class="cta-card-content flex-col md:flex-row">
                        <img src="<?php echo get_template_directory_uri(); ?>/images/company.png" alt="Entreprise"
                            class="cta-character animate-float" style="animation-delay: 1s">
                        <div class="cta-info">
                            <span class="cta-badge cta-badge-company">
                                <i class="fas fa-store mr-2"></i>ENTREPRISE
                            </span>
                            <h3 class="text-2xl md:text-3xl font-bold text-oblink-gray mb-3">
                                Je recrute des talents
                            </h3>
                            <p class="text-oblink-gray/70 mb-6">
                                Trouvez rapidement des opticiens qualifiés et pré-validés. Économisez jusqu'à 40%.
                            </p>
                            <div class="flex items-center text-oblink-orange font-semibold">
                                Publier une offre
                                <i class="fas fa-arrow-right ml-2 group-hover:translate-x-2 transition-transform"></i>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section with Glassmorphism -->
<section class="py-10 md:py-20 relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            <div class="stat-card-glass text-center animate-fade-in-up" style="animation-delay: 0.1s">
                <div class="stat-number"><span class="counter" data-target="8.3">0</span> Md€</div>
                <div class="text-sm text-oblink-gray/70 font-medium">Marché optique français</div>
            </div>
            <div class="stat-card-glass text-center animate-fade-in-up" style="animation-delay: 0.2s">
                <div class="stat-number">+<span class="counter" data-target="13000">0</span></div>
                <div class="text-sm text-oblink-gray/70 font-medium">Magasins d'optique</div>
            </div>
            <div class="stat-card-glass text-center animate-fade-in-up" style="animation-delay: 0.3s">
                <div class="stat-number">+<span class="counter" data-target="44000">0</span></div>
                <div class="text-sm text-oblink-gray/70 font-medium">Professionnels actifs</div>
            </div>
            <div class="stat-card-glass text-center animate-fade-in-up" style="animation-delay: 0.4s">
                <div class="stat-number">+<span class="counter" data-target="15">0</span>%</div>
                <div class="text-sm text-oblink-gray/70 font-medium">Croissance freelancing</div>
            </div>
        </div>
    </div>
</section>

<!-- How it works with 3D Carousel - Optimized -->
<section id="comment-ca-marche" class="py-10 md:py-20 pb-16 md:pb-32 relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12 animate-fade-in">
            <h2 class="text-4xl md:text-5xl font-bold text-oblink-gray mb-4"
                style="font-family: 'Montserrat', sans-serif;">
                Comment ça marche ?
            </h2>
            <p class="text-xl text-oblink-gray/70">Simple, rapide, efficace</p>
        </div>

        <!-- 3D Carousel Container -->
        <div class="carousel-3d-container">
            <div class="carousel-3d" id="processCarousel">
                <!-- Slide 1 -->
                <div class="carousel-3d-item active" data-index="0">
                    <div class="process-card-glass">
                        <div class="process-number">
                            <span class="text-oblink-orange">1</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-4 text-oblink-gray">Créez votre profil</h3>
                        <p class="text-oblink-gray/80 leading-relaxed">Inscrivez-vous en quelques minutes et
                            complétez
                            votre profil professionnel avec vos diplômes, expériences et disponibilités.</p>
                    </div>
                </div>

                <!-- Slide 2 -->
                <div class="carousel-3d-item next" data-index="1">
                    <div class="process-card-glass">
                        <div class="process-number">
                            <span class="text-oblink-blue">2</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-4 text-oblink-gray">Validation 4 étapes</h3>
                        <p class="text-oblink-gray/80 leading-relaxed">Votre profil est validé par notre équipe :
                            diplômes, expérience, test de connaissances et entretien vidéo.</p>
                    </div>
                </div>

                <!-- Slide 3 -->
                <div class="carousel-3d-item prev" data-index="2">
                    <div class="process-card-glass">
                        <div class="process-number">
                            <span class="text-oblink-violet">3</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-4 text-oblink-gray">Connectez & Travaillez</h3>
                        <p class="text-oblink-gray/80 leading-relaxed">Recevez des propositions de missions adaptées
                            ou
                            postulez directement. Gérez tout depuis votre dashboard.</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Controls -->
            <div class="carousel-controls">
                <button class="carousel-btn" id="carousel-prev" aria-label="Précédent">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-btn" id="carousel-next" aria-label="Suivant">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <!-- Indicators -->
            <div class="carousel-indicators">
                <div class="carousel-indicator active" data-slide="0"></div>
                <div class="carousel-indicator" data-slide="1"></div>
                <div class="carousel-indicator" data-slide="2"></div>
            </div>
        </div>
    </div>
    </div>
</section>

<!-- OBLINK ACADEMIE SECTION (New Injection) -->
<section class="py-16 md:py-24 relative overflow-hidden bg-gray-900 border-y border-gray-800">
    <!-- Background Effects -->
    <div
        class="absolute inset-0 bg-[url('<?php echo get_template_directory_uri(); ?>/images/grid-pattern.png')] opacity-5">
    </div>
    <div
        class="absolute top-0 right-0 w-[500px] h-[500px] bg-oblink-orange/10 rounded-full blur-[100px] pointer-events-none">
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center mb-16">
            <span
                class="inline-flex items-center px-4 py-1 rounded-full bg-oblink-orange/20 text-oblink-orange font-bold text-sm mb-6 border border-oblink-orange/20 uppercase tracking-wider">
                <i class="fas fa-bolt mr-2"></i> Nouveau
            </span>
            <h2 class="text-4xl md:text-5xl font-black text-white mb-6 font-display tracking-tight">
                OBLINK ACADÉMIE
            </h2>
            <p class="text-2xl md:text-3xl text-gray-300 font-bold mb-6">
                Ne jouez pas votre BTS OL 2026 aux dés.
            </p>
            <div class="w-24 h-1 bg-gradient-to-r from-oblink-orange to-oblink-violet mx-auto rounded-full mb-8"></div>
            <p class="text-lg text-gray-400 max-w-3xl mx-auto leading-relaxed">
                La réforme 2026 change la donne. Les coefficients U4 et U5 sont plus exigeants que jamais.
                Ne perdez plus de temps avec des annales floues. Accédez à <strong>l'unique Professeur Virtuel</strong>
                capable d'analyser vos erreurs en temps réel.
            </p>
        </div>

        <!-- 3 Pillars Grid -->
        <div class="grid md:grid-cols-3 gap-8 mb-16">
            <!-- Pillar 1 -->
            <div
                class="bg-gray-800/50 backdrop-blur border border-gray-700 p-8 rounded-2xl hover:bg-gray-800 transition duration-300 group">
                <div
                    class="w-16 h-16 rounded-2xl bg-blue-500/10 text-blue-400 flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition">
                    <i class="fas fa-robot"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-4">Correcteur Intelligent</h3>
                <p class="text-gray-400 leading-relaxed">
                    Prenez en photo votre copie. Notre IA (Gemini 2.0 Flash) détecte vos erreurs de signe, vos tracés de
                    rayons et vous note selon le barème officiel.
                </p>
            </div>

            <!-- Pillar 2 -->
            <div
                class="bg-gray-800/50 backdrop-blur border border-gray-700 p-8 rounded-2xl hover:bg-gray-800 transition duration-300 group">
                <div
                    class="w-16 h-16 rounded-2xl bg-orange-500/10 text-oblink-orange flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition">
                    <i class="fas fa-history"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-4">Annales 2005-2025</h3>
                <p class="text-gray-400 leading-relaxed">
                    20 ans d'examens décortiqués. Posez n'importe quelle question sur un sujet passé : l'IA vous
                    explique la logique, pas juste la réponse.
                </p>
            </div>

            <!-- Pillar 3 -->
            <div
                class="bg-gray-800/50 backdrop-blur border border-gray-700 p-8 rounded-2xl hover:bg-gray-800 transition duration-300 group">
                <div
                    class="w-16 h-16 rounded-2xl bg-purple-500/10 text-purple-400 flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition">
                    <i class="fas fa-microchip"></i>
                </div>
                <h3 class="text-xl font-bold text-white mb-4">Simulateur Réforme 2026</h3>
                <p class="text-gray-400 leading-relaxed">
                    Quiz adaptatifs sur les nouvelles épreuves U41, U42 et U5. L'IA identifie vos points faibles et
                    génère vos fiches de révision sur-mesure.
                </p>
            </div>
        </div>

        <!-- Offer Highlight Box -->
        <div class="bg-gradient-to-br from-oblink-orange to-oblink-violet rounded-3xl p-1">
            <div class="bg-gray-900 rounded-[22px] p-8 md:p-12 relative overflow-hidden">
                <div class="grid md:grid-cols-2 gap-12 items-center relative z-10">
                    <div>
                        <h3 class="text-3xl font-bold text-white mb-2">Le Pass Examen OBLINK</h3>
                        <p class="text-gray-400 mb-8">Votre coach personnel, disponible 24h/24.</p>

                        <ul class="space-y-4 mb-8">
                            <li class="flex items-center text-gray-300">
                                <i class="fas fa-check-circle text-green-400 mr-3 text-lg"></i>
                                Accès illimité au Professeur Virtuel
                            </li>
                            <li class="flex items-center text-gray-300">
                                <i class="fas fa-check-circle text-green-400 mr-3 text-lg"></i>
                                Bibliothèque de quiz & Fiches "Spécial VAE"
                            </li>
                            <li class="flex items-center text-gray-300">
                                <i class="fas fa-check-circle text-green-400 mr-3 text-lg"></i>
                                Correction de copies illimitée par IA
                            </li>
                            <li class="flex items-center text-white font-bold">
                                <i class="fas fa-shield-alt text-oblink-orange mr-3 text-lg"></i>
                                Garantie conformité Réforme 2026
                            </li>
                        </ul>
                    </div>
                    <div class="text-center bg-white/5 rounded-2xl p-8 border border-white/10 backdrop-blur-sm">
                        <div class="text-sm text-gray-400 uppercase tracking-widest mb-2">Offre de Lancement</div>
                        <div class="text-5xl font-black text-white mb-2">29 €</div>
                        <div class="text-gray-400 mb-8">Accès total • 6 mois</div>

                        <a href="<?php echo home_url('/pass-examen'); ?>"
                            class="block w-full py-4 bg-oblink-orange hover:bg-orange-600 text-white font-bold rounded-xl shadow-lg hover:shadow-orange-500/25 transition transform hover:scale-105 uppercase tracking-wide">
                            🚀 Activer mon Pass Examen
                        </a>
                        <p class="text-xs text-gray-500 mt-4">Satisfait ou remboursé sous 14 jours</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- SECTION PREVIOUSLY ENDED HERE -->


<!-- For Opticians Section -->
<section id="pour-opticiens" class="py-10 md:py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-2 gap-12 items-center">
            <div class="feature-content">
                <span
                    class="inline-block px-4 py-2 bg-oblink-blue/10 text-oblink-blue rounded-full text-sm font-semibold mb-4">
                    POUR LES OPTICIENS
                </span>
                <h2 class="text-4xl font-bold text-oblink-gray mb-6" style="font-family: 'Montserrat', sans-serif;">
                    Trouvez des missions en toute <span class="text-oblink-orange">liberté</span>
                </h2>
                <p class="text-lg text-oblink-gray/70 mb-8">
                    Que vous soyez en transition vers l'indépendance ou opticien établi, OBLINK vous donne accès à
                    un
                    vivier de missions qualifiées partout en France.
                </p>

                <div class="space-y-4 mb-8">
                    <div class="flex items-start feature-item">
                        <i class="fas fa-check-circle text-oblink-orange text-xl mr-4 mt-1"></i>
                        <div>
                            <h4 class="font-semibold mb-1">Missions adaptées à votre profil</h4>
                            <p class="text-oblink-gray/70">Filtrez par localisation, spécialité et disponibilités
                            </p>
                        </div>
                    </div>
                    <div class="flex items-start feature-item">
                        <i class="fas fa-check-circle text-oblink-orange text-xl mr-4 mt-1"></i>
                        <div>
                            <h4 class="font-semibold mb-1">Accompagnement complet</h4>
                            <p class="text-oblink-gray/70">Portage salarial, assurance RC, formations continues</p>
                        </div>
                    </div>
                    <div class="flex items-start feature-item">
                        <i class="fas fa-check-circle text-oblink-orange text-xl mr-4 mt-1"></i>
                        <div>
                            <h4 class="font-semibold mb-1">Paiements sécurisés</h4>
                            <p class="text-oblink-gray/70">Facturation simplifiée et paiements garantis</p>
                        </div>
                    </div>
                </div>

                <!-- FIXED LINK: Redirects to Inscription -->
                <a href="<?php echo home_url('/inscription-opticien'); ?>"
                    class="inline-block px-8 py-4 bg-oblink-orange text-white rounded-lg hover:bg-oblink-orange/90 transition shadow-lg transform hover:scale-105">
                    Créer mon profil d'opticien <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>

            <div class="relative animate-scale-in" style="animation-delay: 0.3s">
                <div class="feature-image-wrapper">
                    <img src="<?php echo get_template_directory_uri(); ?>/images/optician.png"
                        alt="Opticien professionnel" class="feature-character">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- For Companies Section -->
<section id="pour-entreprises" class="py-10 md:py-20 bg-oblink-beige/30">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-2 gap-12 items-center">
            <div class="relative order-2 md:order-1 animate-scale-in" style="animation-delay: 0.3s">
                <div class="feature-image-wrapper">
                    <img src="<?php echo get_template_directory_uri(); ?>/images/company.png"
                        alt="Gestionnaire entreprise" class="feature-character" style="animation-delay: 1s">
                </div>
            </div>

            <div class="order-1 md:order-2 feature-content">
                <span
                    class="inline-block px-4 py-2 bg-oblink-orange/10 text-oblink-orange rounded-full text-sm font-semibold mb-4">
                    POUR LES ENTREPRISES
                </span>
                <h2 class="text-4xl font-bold text-oblink-gray mb-6" style="font-family: 'Montserrat', sans-serif;">
                    Recrutez des talents <span class="text-oblink-orange">validés</span>
                </h2>
                <p class="text-lg text-oblink-gray/70 mb-8">
                    Trouvez rapidement des opticiens qualifiés pour vos remplacements urgents, missions ponctuelles
                    ou
                    recrutements permanents.
                </p>

                <div class="space-y-4 mb-8">
                    <div class="flex items-start feature-item">
                        <i class="fas fa-check-circle text-oblink-orange text-xl mr-4 mt-1"></i>
                        <div>
                            <h4 class="font-semibold mb-1">Profils pré-validés</h4>
                            <p class="text-oblink-gray/70">Processus de validation en 4 étapes pour garantir la
                                qualité
                            </p>
                        </div>
                    </div>
                    <div class="flex items-start feature-item">
                        <i class="fas fa-check-circle text-oblink-orange text-xl mr-4 mt-1"></i>
                        <div>
                            <h4 class="font-semibold mb-1">Réponse en 48h</h4>
                            <p class="text-oblink-gray/70">Trouvez un remplaçant rapidement pour vos urgences</p>
                        </div>
                    </div>
                    <div class="flex items-start feature-item">
                        <i class="fas fa-check-circle text-oblink-orange text-xl mr-4 mt-1"></i>
                        <div>
                            <h4 class="font-semibold mb-1">Économisez jusqu'à 40%</h4>
                            <p class="text-oblink-gray/70">Par rapport aux agences d'intérim traditionnelles</p>
                        </div>
                    </div>
                </div>

                <!-- FIXED LINK: Redirects to Inscription -->
                <a href="<?php echo home_url('/inscription-entreprise'); ?>"
                    class="inline-block px-8 py-4 bg-oblink-orange text-white rounded-lg hover:bg-oblink-orange/90 transition shadow-lg transform hover:scale-105">
                    Publier une offre <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Services Section - Compact Liquid Glass -->
<section class="py-12 bg-gradient-to-br from-slate-50 via-blue-50 to-violet-50 relative overflow-hidden">
    <!-- Liquid Glass Background Effects -->
    <div class="absolute inset-0 pointer-events-none">
        <div class="liquid-glass-blob blob-1"></div>
        <div class="liquid-glass-blob blob-2"></div>
        <div class="liquid-glass-blob blob-3"></div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center mb-8">
            <h2 class="text-3xl md:text-4xl font-bold text-oblink-gray mb-2"
                style="font-family: 'Montserrat', sans-serif;">
                Écosystème <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-oblink-orange to-oblink-violet">360°</span>
            </h2>
            <p class="text-sm text-oblink-gray/70">Plus qu'une plateforme, un accompagnement complet</p>
        </div>

        <!-- Grid horizontal scrollable mobile -->
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
            <div class="service-card-liquid group" data-delay="0.1">
                <div class="service-icon-mini"><i class="fas fa-shield-alt"></i></div>
                <h3 class="text-sm font-bold text-oblink-gray">RC Pro</h3>
            </div>

            <div class="service-card-liquid group" data-delay="0.2">
                <div class="service-icon-mini"><i class="fas fa-briefcase"></i></div>
                <h3 class="text-sm font-bold text-oblink-gray">Portage</h3>
            </div>

            <div class="service-card-liquid group" data-delay="0.3">
                <div class="service-icon-mini"><i class="fas fa-graduation-cap"></i></div>
                <h3 class="text-sm font-bold text-oblink-gray">Formation</h3>
            </div>

            <div class="service-card-liquid group" data-delay="0.4">
                <div class="service-icon-mini"><i class="fas fa-gavel"></i></div>
                <h3 class="text-sm font-bold text-oblink-gray">Juridique</h3>
            </div>

            <div class="service-card-liquid group" data-delay="0.5">
                <div class="service-icon-mini"><i class="fas fa-file-invoice"></i></div>
                <h3 class="text-sm font-bold text-oblink-gray">Facturation</h3>
            </div>

            <div class="service-card-liquid group" data-delay="0.6">
                <div class="service-icon-mini"><i class="fas fa-users"></i></div>
                <h3 class="text-sm font-bold text-oblink-gray">Communauté</h3>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials - Compact Liquid Glass -->
<section class="py-12 bg-white relative overflow-hidden">
    <!-- Animated particles background -->
    <div class="absolute inset-0 pointer-events-none">
        <div class="particle-container" id="particles-testimonials"></div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center mb-8">
            <h2 class="text-3xl md:text-4xl font-bold text-oblink-gray" style="font-family: 'Montserrat', sans-serif;">
                <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-oblink-orange via-oblink-violet to-oblink-blue">4.9/5</span>
                sur 180+ avis
            </h2>
        </div>

        <!-- Horizontal scroll on mobile, grid on desktop -->
        <div
            class="flex md:grid md:grid-cols-2 gap-4 md:gap-6 overflow-x-auto md:overflow-visible snap-x snap-mandatory md:snap-none pb-4 md:pb-0 -mx-4 px-4 md:mx-0">
            <div class="testimonial-card-liquid snap-center flex-shrink-0 w-[85vw] md:w-auto" data-delay="0.2">
                <div class="flex items-center mb-3">
                    <div class="testimonial-avatar-mini">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="ml-3">
                        <h4 class="font-bold text-oblink-gray text-sm">Sarah D.</h4>
                        <p class="text-xs text-oblink-gray/70">Opticienne freelance</p>
                    </div>
                    <div class="flex text-yellow-400 text-xs ml-auto">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                <p class="text-oblink-gray/80 text-sm leading-relaxed">
                    "J'ai trouvé mes premières missions en moins d'une semaine. L'accompagnement administratif est
                    vraiment précieux."
                </p>
            </div>

            <div class="testimonial-card-liquid snap-center flex-shrink-0 w-[85vw] md:w-auto" data-delay="0.4">
                <div class="flex items-center mb-3">
                    <div class="testimonial-avatar-mini">
                        <i class="fas fa-store"></i>
                    </div>
                    <div class="ml-3">
                        <h4 class="font-bold text-oblink-gray text-sm">Pierre M.</h4>
                        <p class="text-xs text-oblink-gray/70">Gérant magasin</p>
                    </div>
                    <div class="flex text-yellow-400 text-xs ml-auto">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                <p class="text-oblink-gray/80 text-sm leading-relaxed">
                    "Profils validés, réponse en 48h max. Économies importantes par rapport aux agences d'intérim."
                </p>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Shield Section (New) -->
<section class="py-16 bg-white relative">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-oblink-gray mb-4"
                style="font-family: 'Montserrat', sans-serif;">
                Questions <span class="text-oblink-orange">Fréquentes</span>
            </h2>
            <p class="text-lg text-gray-500">Tout ce que vous devez savoir avant de commencer.</p>
        </div>

        <div class="space-y-4">
            <!-- Question 1 -->
            <div class="bg-gray-50 rounded-2xl p-6 hover:bg-white hover:shadow-lg transition duration-300 border border-transparent hover:border-gray-100 group cursor-pointer"
                onclick="this.classList.toggle('active')">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-lg font-bold text-gray-900 group-hover:text-oblink-orange transition">Est-ce que le
                        contenu est à jour pour la réforme BTS OL 2026 ?</h3>
                    <i
                        class="fas fa-chevron-down text-gray-400 transform transition-transform group-[.active]:rotate-180"></i>
                </div>
                <div class="text-gray-600 leading-relaxed hidden group-[.active]:block animate-fade-in">
                    <strong class="text-gray-900">Oui.</strong> Notre IA est entraînée sur le nouveau référentiel.
                    Chaque question générée prend en compte les dernières évolutions techniques et réglementaires du
                    secteur.
                </div>
            </div>

            <!-- Question 2 -->
            <div class="bg-gray-50 rounded-2xl p-6 hover:bg-white hover:shadow-lg transition duration-300 border border-transparent hover:border-gray-100 group cursor-pointer"
                onclick="this.classList.toggle('active')">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-lg font-bold text-gray-900 group-hover:text-oblink-orange transition">OBLINK est-il
                        une agence d'intérim ?</h3>
                    <i
                        class="fas fa-chevron-down text-gray-400 transform transition-transform group-[.active]:rotate-180"></i>
                </div>
                <div class="text-gray-600 leading-relaxed hidden group-[.active]:block animate-fade-in">
                    <strong class="text-gray-900">Non.</strong> Nous sommes une plateforme de mise en relation directe.
                    Cela nous permet de supprimer les intermédiaires et d'offrir des TJM plus élevés aux freelances et
                    des coûts réduits aux magasins.
                </div>
            </div>

            <!-- Question 3 -->
            <div class="bg-gray-50 rounded-2xl p-6 hover:bg-white hover:shadow-lg transition duration-300 border border-transparent hover:border-gray-100 group cursor-pointer"
                onclick="this.classList.toggle('active')">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-lg font-bold text-gray-900 group-hover:text-oblink-orange transition">Comment mon
                        profil est-il certifié ?</h3>
                    <i
                        class="fas fa-chevron-down text-gray-400 transform transition-transform group-[.active]:rotate-180"></i>
                </div>
                <div class="text-gray-600 leading-relaxed hidden group-[.active]:block animate-fade-in">
                    Votre profil devient <strong class="text-green-600">"Certifié OBLINK"</strong> dès que vous
                    réussissez nos tests d'expertise (Logiciel ERP, Réfraction, Gestion). C'est ce badge qui garantit
                    votre visibilité auprès des recruteurs.
                </div>
            </div>

            <!-- Question 4 -->
            <div class="bg-gray-50 rounded-2xl p-6 hover:bg-white hover:shadow-lg transition duration-300 border border-transparent hover:border-gray-100 group cursor-pointer"
                onclick="this.classList.toggle('active')">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-lg font-bold text-gray-900 group-hover:text-oblink-orange transition">Puis-je
                        utiliser mon compte sur plusieurs appareils ?</h3>
                    <i
                        class="fas fa-chevron-down text-gray-400 transform transition-transform group-[.active]:rotate-180"></i>
                </div>
                <div class="text-gray-600 leading-relaxed hidden group-[.active]:block animate-fade-in">
                    Pour garantir la sécurité de vos données et la rentabilité du service, l'accès est limité à <strong
                        class="text-gray-900">deux appareils</strong> (ex: votre mobile et votre ordinateur).
                </div>
            </div>

            <!-- Question 5 -->
            <div class="bg-gray-50 rounded-2xl p-6 hover:bg-white hover:shadow-lg transition duration-300 border border-transparent hover:border-gray-100 group cursor-pointer"
                onclick="this.classList.toggle('active')">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-lg font-bold text-gray-900 group-hover:text-oblink-orange transition">Comment sont
                        sécurisés mes paiements ?</h3>
                    <i
                        class="fas fa-chevron-down text-gray-400 transform transition-transform group-[.active]:rotate-180"></i>
                </div>
                <div class="text-gray-600 leading-relaxed hidden group-[.active]:block animate-fade-in">
                    Tous les flux financiers sont gérés par <strong class="text-purple-600">Stripe</strong>, le leader
                    mondial du paiement sécurisé. OBLINK n'a jamais accès à vos coordonnées bancaires.
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Blog Section -->
<section class="py-10 md:py-20 bg-white relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <span
                class="inline-block px-4 py-2 bg-oblink-orange/10 text-oblink-orange rounded-full text-sm font-semibold mb-4">
                <i class="fas fa-newspaper mr-2"></i>BLOG OBLINK
            </span>
            <h2 class="text-4xl md:text-5xl font-bold text-oblink-gray mb-4"
                style="font-family: 'Montserrat', sans-serif;">
                Conseils & <span class="text-oblink-orange">Actualités</span>
            </h2>
            <p class="text-xl text-oblink-gray/70 max-w-2xl mx-auto">
                Guides pratiques, témoignages et actualités pour réussir en tant qu'opticien indépendant
            </p>
        </div>

        <div class="grid md:grid-cols-3 gap-8 mb-12">
            <?php
            // Query latest 3 posts
            $args = array(
                'posts_per_page' => 3,
                'post_status' => 'publish',
                'orderby' => 'date',
                'order' => 'DESC'
            );
            $latest_posts = new WP_Query($args);

            if ($latest_posts->have_posts()):
                while ($latest_posts->have_posts()):
                    $latest_posts->the_post();
                    $thumb_url = get_the_post_thumbnail_url(get_the_ID(), 'medium_large');
                    if (!$thumb_url) {
                        // Fallback image if no featured image
                        $thumb_url = 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=800';
                    }
                    ?>
                    <article class="group">
                        <a href="<?php the_permalink(); ?>" class="block">
                            <div class="relative overflow-hidden rounded-2xl mb-4 h-56">
                                <img src="<?php echo esc_url($thumb_url); ?>" alt="<?php the_title_attribute(); ?>"
                                    class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500">
                                <div class="absolute inset-0 bg-gradient-to-t from-oblink-gray/80 to-transparent"></div>
                                <div class="absolute bottom-4 left-4 right-4">
                                    <span
                                        class="inline-block px-3 py-1 bg-oblink-orange text-white rounded-full text-xs font-semibold mb-2">
                                        <?php
                                        $cats = get_the_category();
                                        echo !empty($cats) ? esc_html($cats[0]->name) : 'Actualité';
                                        ?>
                                    </span>
                                    <div class="flex items-center gap-3 text-white/80 text-xs">
                                        <span><i class="fas fa-calendar mr-1"></i><?php echo get_the_date('d M Y'); ?></span>
                                        <span><i class="fas fa-clock mr-1"></i>5 min</span>
                                    </div>
                                </div>
                            </div>
                            <h3
                                class="text-xl font-bold text-oblink-gray mb-2 group-hover:text-oblink-orange transition line-clamp-2">
                                <?php the_title(); ?>
                            </h3>
                            <p class="text-oblink-gray/70 text-sm line-clamp-3 mb-3">
                                <?php echo wp_trim_words(get_the_excerpt(), 20, '...'); ?>
                            </p>
                            <span
                                class="inline-flex items-center text-oblink-orange font-semibold text-sm group-hover:underline">
                                Lire l'article <i
                                    class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                            </span>
                        </a>
                    </article>
                    <?php
                endwhile;
                wp_reset_postdata();
            else:
                // Fallback content if no posts exist (so the section isn't empty in dev)
                ?>
                <div class="col-span-3 text-center text-gray-400 py-10">
                    <p>Aucun article publié pour le moment.</p>
                </div>
                <?php
            endif;
            ?>
        </div>

        <!-- CTA vers le blog -->
        <div class="text-center">
            <a href="<?php echo home_url('/blog'); ?>"
                class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-oblink-orange to-oblink-violet text-white rounded-xl font-semibold hover:shadow-xl transition transform hover:scale-105">
                <i class="fas fa-newspaper mr-2"></i>
                Découvrir tous les articles
                <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>
    </div>
</section>

<!-- Community Newsletter Section -->
<section class="py-8 md:py-16 pb-16 md:pb-32 mb-20 relative overflow-hidden">
    <!-- Background with gradient and mesh -->
    <div class="absolute inset-0 bg-gray-900">
        <div class="absolute inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-oblink-gray opacity-90"></div>
        <!-- Abstract Shapes -->
        <div
            class="absolute top-0 right-0 w-96 h-96 bg-oblink-orange/20 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2">
        </div>
        <div
            class="absolute bottom-0 left-0 w-96 h-96 bg-oblink-violet/20 rounded-full blur-3xl transform -translate-x-1/2 translate-y-1/2">
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
        <span
            class="inline-block px-4 py-1.5 rounded-full bg-white/10 text-white/90 text-sm font-semibold mb-4 border border-white/20 backdrop-blur-sm">
            <i class="fas fa-star text-oblink-orange mr-2"></i>Rejoignez l'élite de l'optique
        </span>

        <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight"
            style="font-family: 'Overpass', sans-serif;">
            Ne manquez aucune <span
                class="bg-gradient-to-r from-oblink-orange to-oblink-orange/80 bg-clip-text text-transparent">opportunité</span>.
        </h2>

        <p class="text-xl text-gray-300 mb-6 max-w-2xl mx-auto leading-relaxed">
            Recevez en exclusivité les dernières missions, les actualités du secteur et nos conseils d'experts. Pas de
            spam, juste de la valeur.
        </p>

        <form class="max-w-lg mx-auto relative group"
            onsubmit="event.preventDefault(); showToast('Merci ! Vous faites désormais partie du cercle.', 'success');">
            <div
                class="absolute -inset-1 bg-gradient-to-r from-oblink-orange to-oblink-violet rounded-xl blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200">
            </div>
            <div class="relative flex items-center bg-white rounded-xl p-1.5 shadow-2xl">
                <div class="flex-shrink-0 pl-4 pr-2 text-gray-400">
                    <i class="fas fa-envelope"></i>
                </div>
                <input type="email" placeholder="Votre email professionnel" required
                    class="flex-1 p-3 text-gray-900 placeholder-gray-400 bg-transparent border-none focus:ring-0 focus:outline-none w-full">
                <button type="submit"
                    class="px-6 py-3 bg-oblink-gray text-white font-bold rounded-lg hover:bg-gray-800 transition-all duration-200 shadow-md whitespace-nowrap">
                    Rejoindre le cercle
                </button>
            </div>
            <p class="text-gray-500 text-xs mt-4">
                <i class="fas fa-lock mr-1"></i> Vos données sont protégées. Désinscription à tout moment.
            </p>
        </form>
    </div>
</section>

<?php include get_template_directory() . "/footer-content.php";
wp_footer(); ?>